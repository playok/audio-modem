# Audio Modem

브라우저만으로 동작하는 OFDM 오디오 모뎀 파일 전송 시스템.

스피커와 마이크, 또는 3.5mm AUX 케이블을 통해 두 기기 간에 파일을 전송합니다. 서버가 필요 없으며 `index.html`을 열기만 하면 동작합니다.

[English](README_en.md)

## 주요 특징

- **서버 불필요** — 순수 클라이언트 사이드 JavaScript, 정적 파일만으로 동작
- **OFDM 변조** — 다중 서브캐리어를 사용한 고속 데이터 전송
- **다양한 변조 방식** — QPSK, 16-QAM, BPSK (음향/고신뢰/협대역)
- **대용량 파일 지원** — 청크 분할 전송 + 스트리밍 수신으로 500MB+ 파일 처리
- **CRC-32 검증** — 프레임 단위 무결성 검사
- **실시간 모니터링** — 레벨미터, 파형 트리머, 청크 비트맵 시각화

## 빠른 시작

```bash
# 방법 1: 직접 열기
open index.html

# 방법 2: 로컬 서버 (마이크 사용 시 HTTPS/localhost 필요)
python3 -m http.server 8000
# http://localhost:8000 접속
```

## 사용법

### 송신 (파일 전송)

1. **파일 전송** 모드 선택
2. 변조 방식 선택 (케이블: QPSK/16-QAM, 스피커: BPSK)
3. 파일 선택 후 **전송 시작** 클릭

### 수신 (파일 수신)

1. **파일 수신** 모드 선택
2. 수신 방식 선택:
   - **수동 (트림)** — 소규모 파일, 녹음 후 구간 선택하여 복조
   - **스트리밍 (실시간)** — 대용량 파일, 실시간 프레임 탐지/복조
3. **수신 대기** 클릭 후 송신측에서 전송 시작

## 변조 방식

| 방식 | 속도 | 용도 |
|------|------|------|
| QPSK | ~2.5 KB/s | 케이블 연결 (기본) |
| 16-QAM | ~5 KB/s | 케이블 연결 (고속) |
| BPSK | ~0.5 KB/s | 스피커 → 마이크 |
| BPSK-반복 | ~170 B/s | 소음 환경, 고신뢰 |
| 협대역 | ~100 B/s | 최고 안정성 |

## 대용량 파일 전송

32KB를 초과하는 파일은 자동으로 청크 분할 전송됩니다:

- **송신**: 파일을 2~4KB 청크로 분할, 각 청크를 독립 OFDM 프레임으로 전송
- **수신**: 실시간 프리앰블 탐지 → 프레임 복조 → IndexedDB 저장
- **메모리**: 송수신 모두 O(chunkSize) 상수 메모리 사용

## 기술 스택

- **변조**: OFDM (FFT 512, 서브캐리어 ~205개)
- **동기화**: Schmidl-Cox 프리앰블 (auto-correlation + cross-correlation)
- **채널 추정**: 파일럿 서브캐리어 + CE 심볼
- **오류 검출**: CRC-32
- **오디오**: Web Audio API (44100 Hz)
- **저장**: IndexedDB (대용량 청크 저장)

## 파일 구조

```
index.html  — UI (송신/수신 패널, 설정, 진행률)
modem.js    — OFDM 코어 (FFT, 변복조, 프리앰블, 청크 프로토콜)
app.js      — 앱 로직 (송수신, 스트리밍, UI 제어)
docs/       — 프로토콜 사양서
```

## 브라우저 호환

마이크 접근을 위해 HTTPS 또는 localhost가 필요합니다.

- Chrome 66+
- Firefox 76+
- Safari 14.1+
- Edge 79+

## 라이선스

MIT
